
Running 74 tests using 6 workers

🔐 Starting coach authentication setup...
🧹 Cleared existing cookies
API Response: {
  "redirect": false,
  "token": "vFLfmIzHncsEpo89pTUyTJt1c8Ifzndd",
  "user": {
    "id": "11IIOMv5CTucdjk0YXUubKVr3i61wLUZ",
    "email": "alex.rivera@ultracoach.dev",
    "name": "Alex Rivera",
    "image": null,
    "emailVerified": false,
    "createdAt": "2025-09-02T17:01:14.621Z",
    "updatedAt": "2025-09-02T17:01:14.621Z"
  }
}
Response headers: {
  [32m'x-frame-options'[39m: [32m'DENY'[39m,
  [32m'x-content-type-options'[39m: [32m'nosniff'[39m,
  [32m'referrer-policy'[39m: [32m'origin-when-cross-origin'[39m,
  vary: [32m'RSC, Next-Router-State-Tree, Next-Router-Prefetch, Next-Router-Segment-Prefetch'[39m,
  [32m'content-type'[39m: [32m'application/json'[39m,
  [32m'set-cookie'[39m: [32m'better-auth.session_token=vFLfmIzHncsEpo89pTUyTJt1c8Ifzndd.KUQF6gKDhJSQf7jU5yjj44ht2OgraQ17VHdH6nugcgI%3D; Max-Age=1209600; Path=/; HttpOnly; SameSite=Lax'[39m,
  date: [32m'Fri, 05 Sep 2025 22:24:33 GMT'[39m,
  connection: [32m'keep-alive'[39m,
  [32m'keep-alive'[39m: [32m'timeout=5'[39m,
  [32m'transfer-encoding'[39m: [32m'chunked'[39m
}
  ✓   1 [chromium-unauth] › tests/e2e/auth-api.spec.ts:4:7 › Authentication API Tests › should authenticate via API directly (1.4s)
📍 Navigated to signin page at http://localhost:3001/auth/signin
Final URL after navigation: /auth/signin
Got redirected to signin, cookies might not be set properly
  ✓   6 [chromium-unauth] › tests/e2e/auth-api.spec.ts:32:7 › Authentication API Tests › should access dashboard after API authentication (3.3s)
✅ Filled coach credentials
📤 Submitted login form
🔄 Current path after login: /auth/signin
  ✓   4 [chromium-unauth] › tests/auth.spec.ts:6:7 › Authentication Flow › should display signin page (5.7s)
🔄 Current path after login: /dashboard/coach
✅ Coach dashboard loaded successfully
💾 Saved coach auth state to /Users/MXB5594/playground/ultracoach/playwright/.auth/coach.json
🍪 Saved 1 cookies
✅ Auth cookies saved:
   - better-auth.session_token: present
✅ Auth file created: /Users/MXB5594/playground/ultracoach/playwright/.auth/coach.json (347 bytes)
  ✓   3 [setup] › tests/auth.setup.ts:6:6 › authenticate (11.1s)
  ✓   2 [setup-coach] › tests/auth-coach.setup.ts:6:6 › authenticate as coach (11.1s)
  ✓   5 [chromium-unauth] › tests/e2e/auth-flows.spec.ts:24:7 › Authentication Flows with Jotai Atoms › should complete sign up flow and update auth atoms (16.0s)
  ✓   7 [chromium-unauth] › tests/auth.spec.ts:14:7 › Authentication Flow › should redirect to dashboard after successful runner login (12.6s)
  ✓   8 [chromium-unauth] › tests/e2e/auth-flows.spec.ts:80:7 › Authentication Flows with Jotai Atoms › should complete sign in flow and update session atom (9.3s)
  ✓   9 [chromium-unauth] › tests/auth.spec.ts:30:7 › Authentication Flow › should redirect to dashboard after successful coach login (8.7s)
  ✓  11 [chromium-unauth] › tests/auth.spec.ts:46:7 › Authentication Flow › should show error for invalid credentials (4.6s)
  ✓  12 [chromium-unauth] › tests/auth.spec.ts:75:7 › Landing Page › should display landing page with proper navigation (733ms)
  ✓  10 [chromium-unauth] › tests/e2e/auth-flows.spec.ts:116:7 › Authentication Flows with Jotai Atoms › should handle sign out and clear auth atoms (7.9s)
  ✓  13 [chromium-unauth] › tests/auth.spec.ts:86:7 › Landing Page › should navigate to signin page from landing page (1.2s)
  ✓  14 [chromium-unauth] › tests/e2e/auth-flows.spec.ts:150:7 › Authentication Flows with Jotai Atoms › should maintain role-based access with isCoachAtom/isRunnerAtom (10.2s)
  ✓  15 [chromium-unauth] › tests/e2e/auth-flows.spec.ts:174:7 › Authentication Flows with Jotai Atoms › should persist auth state across page refreshes (12.9s)
  ✓  16 [chromium-unauth] › tests/e2e/auth-flows.spec.ts:202:7 › Authentication Flows with Jotai Atoms › should handle auth errors gracefully (6.1s)
  ✓  17 [chromium-unauth] › tests/e2e/auth-flows.spec.ts:224:7 › Authentication Flows with Jotai Atoms › should redirect to originally requested page after auth (7.6s)
  -  22 [chromium-other] › tests/e2e/chat-messaging.spec.ts:42:10 › Chat Messaging System › Coach-Runner Messaging › should send and receive messages
  -  23 [chromium-other] › tests/e2e/chat-messaging.spec.ts:84:10 › Chat Messaging System › Coach-Runner Messaging › should show typing indicators
Font size: 30px
Color: rgb(236, 237, 238)
Button background: rgb(0, 111, 238)
  ✓  18 [chromium-other] › tests/e2e/check-css.spec.ts:4:7 › CSS Loading Check › should have CSS loaded on signin page (11.5s)
  ✘  25 [chromium-other] › tests/e2e/training-plan-management.spec.ts:20:9 › Training Plan Management › Coach Training Plan Management › should display training plans with filtering (15.8s)
  ✘  24 [chromium-other] › tests/e2e/chat-messaging.spec.ts:130:9 › Chat Messaging System › Coach-Runner Messaging › should mark messages as read (20.5s)
  ✘  20 [chromium-other] › tests/e2e/coach-runner-relationships.spec.ts:19:9 › Coach-Runner Relationship Management › Coach Perspective › should display available runners to connect with (21.7s)
  ✓  21 [chromium-runner] › tests/dashboard.spec.ts:6:7 › Runner Dashboard › should display training plans and metrics (32.2s)
  ✘  26 [chromium-other] › tests/e2e/workout-management.spec.ts:22:9 › Workout Management › Runner Workout Management › should display workouts list with proper filtering (27.4s)
  ✘  27 [chromium-other] › tests/e2e/training-plan-management.spec.ts:54:9 › Training Plan Management › Coach Training Plan Management › should create a new training plan (21.1s)
  ✓  19 [chromium-coach] › tests/dashboard.spec.ts:25:7 › Coach Dashboard › should display runners and coach metrics (39.7s)
  ✘  28 [chromium-other] › tests/e2e/chat-messaging.spec.ts:181:9 › Chat Messaging System › Coach-Runner Messaging › should handle message attachments and links (21.6s)
  ✘  29 [chromium-other] › tests/e2e/coach-runner-relationships.spec.ts:35:9 › Coach-Runner Relationship Management › Coach Perspective › should send connection request to runner (25.2s)
  ✘  31 [chromium-other] › tests/e2e/workout-management.spec.ts:48:9 › Workout Management › Runner Workout Management › should create a new workout (23.3s)
  ✘  32 [chromium-other] › tests/e2e/training-plan-management.spec.ts:105:9 › Training Plan Management › Coach Training Plan Management › should edit training plan details (23.3s)
  ✓  30 [chromium-runner] › tests/dashboard.spec.ts:45:7 › Navigation Tests › should navigate to training plans page (36.5s)
  ✘  33 [chromium-other] › tests/e2e/chat-messaging.spec.ts:223:9 › Chat Messaging System › Coach-Runner Messaging › should search messages (23.3s)
  ✘  34 [chromium-other] › tests/e2e/coach-runner-relationships.spec.ts:62:9 › Coach-Runner Relationship Management › Coach Perspective › should manage active runner relationships (19.3s)
  ✘  36 [chromium-other] › tests/e2e/workout-management.spec.ts:84:9 › Workout Management › Runner Workout Management › should edit an existing workout (17.7s)
  ✘  35 [chromium-other] › tests/e2e/training-plan-management.spec.ts:136:9 › Training Plan Management › Coach Training Plan Management › should manage training plan phases (17.7s)
  ✓  37 [chromium-runner] › tests/dashboard.spec.ts:55:7 › Navigation Tests › should navigate to workouts page (21.2s)
  ✘  38 [chromium-other] › tests/e2e/chat-messaging.spec.ts:266:9 › Chat Messaging System › Group Messaging Features › should create group conversation (22.7s)
  ✘  39 [chromium-other] › tests/e2e/coach-runner-relationships.spec.ts:79:9 › Coach-Runner Relationship Management › Coach Perspective › should invite runner via email (27.6s)
  ✘  41 [chromium-other] › tests/e2e/training-plan-management.spec.ts:166:9 › Training Plan Management › Coach Training Plan Management › should assign workouts to training plan (18.8s)
  ✘  40 [chromium-other] › tests/e2e/workout-management.spec.ts:112:9 › Workout Management › Runner Workout Management › should log workout completion (19.0s)
  ✘  42 [chromium-runner] › tests/dashboard.spec.ts:65:7 › Navigation Tests › should access chat functionality (30.4s)
  ✘  45 [chromium-other] › tests/e2e/training-plan-management.spec.ts:200:9 › Training Plan Management › Coach Training Plan Management › should duplicate training plan as template (20.1s)
  ✘  46 [chromium-other] › tests/e2e/workout-management.spec.ts:153:9 › Workout Management › Runner Workout Management › should delete a workout (20.1s)
  ✘  43 [chromium-other] › tests/e2e/chat-messaging.spec.ts:306:9 › Chat Messaging System › Group Messaging Features › should handle notifications preferences (34.2s)
  ✘  44 [chromium-other] › tests/e2e/coach-runner-relationships.spec.ts:104:9 › Coach-Runner Relationship Management › Coach Perspective › should view and manage runner training plans (41.6s)
  ✘  47 [chromium-other] › tests/e2e/training-plan-management.spec.ts:234:9 › Training Plan Management › Coach Training Plan Management › should delete training plan (15.7s)
  ✘  48 [chromium-other] › tests/e2e/workout-management.spec.ts:186:9 › Workout Management › Runner Workout Management › should sync workout with Strava (15.7s)
  ✓  52 [chromium-other] › tests/e2e/training-plan-management.spec.ts:289:9 › Training Plan Management › Runner Training Plan Experience › should view assigned training plan (15.1s)
  ✘  49 [chromium-other] › tests/e2e/chat-messaging.spec.ts:346:9 › Chat Messaging System › Message State Management › should update messagesAtom in real-time (27.5s)
  ✘  51 [chromium-other] › tests/e2e/workout-management.spec.ts:226:9 › Workout Management › Coach Workout Management › should create workout for runner (30.2s)
  ✘  54 [chromium-other] › tests/e2e/chat-messaging.spec.ts:392:9 › Chat Messaging System › Message State Management › should handle optimistic updates (17.4s)
  ✘  53 [chromium-other] › tests/e2e/training-plan-management.spec.ts:311:9 › Training Plan Management › Runner Training Plan Experience › should track training plan progress (24.7s)
  ✘  50 [chromium-other] › tests/e2e/coach-runner-relationships.spec.ts:137:9 › Coach-Runner Relationship Management › Runner Perspective › should display available coaches to connect with (49.0s)
  ✘  56 [chromium-other] › tests/e2e/chat-messaging.spec.ts:429:9 › Chat Messaging System › Message State Management › should update conversation list order (17.8s)
  ✘  57 [chromium-other] › tests/e2e/training-plan-management.spec.ts:347:9 › Training Plan Management › Runner Training Plan Experience › should view training plan calendar (19.2s)
