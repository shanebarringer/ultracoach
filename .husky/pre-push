echo "🚀 Running pre-push checks..."

# Run critical E2E tests (auth and race-import)
echo "🧪 Running critical E2E tests..."
pnpm test:critical || {
  echo "❌ Critical tests failed. Please fix them before pushing."
  echo "💡 Tip: Run 'pnpm test:critical' locally to debug"
  exit 1
}

# Build check (ensures production build works)
echo "🏗️  Checking build..."
pnpm build || {
  echo "❌ Build failed. Please fix build errors before pushing."
  exit 1
}

echo "✅ All pre-push checks passed! 🎉"